---
title: Koneoppimisstudion (perinteinen) kokeileminen
description: (Perinteisen) koneoppimisstudion mallien käyttäminen Dynamics 365 Customer Insightsissa.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: m-hartmann
ms.author: ameetj
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: 71881f7e1f9448fe0a7d6d92b8102b8b42de7c2a
ms.sourcegitcommit: bae40184312ab27b95c140a044875c2daea37951
ms.translationtype: HT
ms.contentlocale: fi-FI
ms.lasthandoff: 03/15/2021
ms.locfileid: "5598335"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="dc195-103">Azuren koneoppimisstudioon (perinteinen) perustuvien mallien käyttäminen</span><span class="sxs-lookup"><span data-stu-id="dc195-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="dc195-104">Dynamics 365 Customer Insightsin yhtenäistetyt tiedot ovat sellaisten koneoppimismallien muodostamisen lähde, joilla voidaan luoda lisää merkityksellisiä liiketoimintatietoja.</span><span class="sxs-lookup"><span data-stu-id="dc195-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="dc195-105">Integroituneet Customer Insights ja koneoppimisstudio (perinteinen) käyttävät käyttäjän mukautettuja malleja</span><span class="sxs-lookup"><span data-stu-id="dc195-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="dc195-106">Lisätietoja Azuren automaattianalyysipalveluissa kehitettyjen mallien integroinnista Customer Insightsiin on kohdassa [Azuren automaattianalyysipalvelujen kokeileminen](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="dc195-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="dc195-107">Edellytykset</span><span class="sxs-lookup"><span data-stu-id="dc195-107">Prerequisites</span></span>

- <span data-ttu-id="dc195-108">Customer Insightsin käyttöoikeus</span><span class="sxs-lookup"><span data-stu-id="dc195-108">Access to Customer Insights</span></span>
- <span data-ttu-id="dc195-109">Aktiivinen Azure Enterprise -tilaus</span><span class="sxs-lookup"><span data-stu-id="dc195-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="dc195-110">Yhdistetyt asiakasprofiilit</span><span class="sxs-lookup"><span data-stu-id="dc195-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="dc195-111">Määritetty [entiteetin vienti Azure Blob -säilöön ](export-azure-blob-storage.md)</span><span class="sxs-lookup"><span data-stu-id="dc195-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="dc195-112">Perinteisen koneoppimisstudion määrittäminen</span><span class="sxs-lookup"><span data-stu-id="dc195-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="dc195-113">Ensimmäisessä vaiheessa luodaan koneoppimisstudiolle (perinteinen) työtila ja avataan studio.</span><span class="sxs-lookup"><span data-stu-id="dc195-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="dc195-114">Siirry [https://www.portal.azure.comen](https://www.portal.azure.com/) ja kirjaudu sisään.</span><span class="sxs-lookup"><span data-stu-id="dc195-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="dc195-115">Valitse **Luo resurssi**.</span><span class="sxs-lookup"><span data-stu-id="dc195-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="dc195-116">Hae **Koneoppimisstudion työtila** ja valitse **Luo**.</span><span class="sxs-lookup"><span data-stu-id="dc195-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="dc195-117">Anna [työtilan luontiin](/azure/machine-learning/studio/create-workspace) tarvittavat tiedot.</span><span class="sxs-lookup"><span data-stu-id="dc195-117">Enter the required details to [create the workspace](/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="dc195-118">Valitse **Verkkopalvelusuunnitelman hinnoittelutaso** sen perusteella, kuinka paljon tietoja suunnittelet tuovasi.</span><span class="sxs-lookup"><span data-stu-id="dc195-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="dc195-119">Paras tulos saadaan valitsemalla maantieteellisesti lähin **sijainti**.</span><span class="sxs-lookup"><span data-stu-id="dc195-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="dc195-120">Koneoppimisstudion työtilan koontinäyttö avautuu, kun resurssi on luotu.</span><span class="sxs-lookup"><span data-stu-id="dc195-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="dc195-121">Valitse **Käynnistä koneoppimisstudio**.</span><span class="sxs-lookup"><span data-stu-id="dc195-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Azuren koneoppimisstudion käyttöliittymä](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="dc195-123">Azuren koneoppimisstudion käyttäminen</span><span class="sxs-lookup"><span data-stu-id="dc195-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="dc195-124">Voit nyt luoda uuden kokeilun tai tuoda aiemmin luodun kokeilumallin esimerkkivalikoimasta.</span><span class="sxs-lookup"><span data-stu-id="dc195-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="dc195-125">Käytössä on näytekokeiluja kolmeen vakioskenaarioon:</span><span class="sxs-lookup"><span data-stu-id="dc195-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="dc195-126">Vaihtuvuusennuste</span><span class="sxs-lookup"><span data-stu-id="dc195-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="dc195-127">Asiakkaan elinkaaren arvo</span><span class="sxs-lookup"><span data-stu-id="dc195-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="dc195-128">Tuotesuositus tai seuraava paras toiminto</span><span class="sxs-lookup"><span data-stu-id="dc195-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="dc195-129">Jos luot uuden kokeilun tai käytät valikoiman kokeilumallia, **Tuo tiedot** -ominaisuudet on määritettävä.</span><span class="sxs-lookup"><span data-stu-id="dc195-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="dc195-130">Siirry tietosi sisältävään Azure Blob -säilöön käyttämällä ohjattua kokemusta tai antamalla tiedot suoraan.</span><span class="sxs-lookup"><span data-stu-id="dc195-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Azuren koneoppimisstudion kokeilu](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="dc195-132">Voit luoda muodostaa mukautetun käsittelyjakson, joka siistii ja esikäsittelee tiedot, poimii ominaisuudet ja kouluttaa sopivan mallin.</span><span class="sxs-lookup"><span data-stu-id="dc195-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="dc195-133">Testaa ja optimoi mallin toiminta.</span><span class="sxs-lookup"><span data-stu-id="dc195-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="dc195-134">Kun olet tyytyväinen malliin, valitse **Määritä verkkopalvelu** > **Ennakoiva verkkopalvelu**.</span><span class="sxs-lookup"><span data-stu-id="dc195-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="dc195-135">Tämä vaihtoehto tuo koulutetun mallin ja ominaisuuksien kehitysjakson koulutuskokeilusta ennakoivaan palveluun.</span><span class="sxs-lookup"><span data-stu-id="dc195-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="dc195-136">Ennakoiva palvelu voi tehdä ennusteita ottamalla käyttöön toisen syötetietojoukon, jossa on koulutuskokeilussa käytetty rakenne.</span><span class="sxs-lookup"><span data-stu-id="dc195-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Ennakoivan verkkopalvelun määrittäminen](media/predictive-webservice-control.png)

1. <span data-ttu-id="dc195-138">Kun ennakoiva verkkokokeilu toimii oikein, se voidaan ottaa käyttöön automaattisessa aikataulutuksessa.</span><span class="sxs-lookup"><span data-stu-id="dc195-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="dc195-139">Verkkopalvelun käyttäminen Customer Insightsin kanssa määritetään valitsemalla **Ota verkkopalvelu käyttöön** > **Ota verkkopalvelu käyttöön [uusi] – esiversio**.</span><span class="sxs-lookup"><span data-stu-id="dc195-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="dc195-140">[Lisätietoja verkkopalvelun käyttöönottamisesta](/azure/machine-learning/studio/deploy-a-machine-learning-web-service)</span><span class="sxs-lookup"><span data-stu-id="dc195-140">[Learn more about deploying a web service](/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Ennakoivan verkkopalvelun käyttöönottaminen](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="dc195-142">Valikoiman esimerkkimallit</span><span class="sxs-lookup"><span data-stu-id="dc195-142">Sample models from the gallery</span></span>

<span data-ttu-id="dc195-143">Tässä artikkelissa malleissa käytetään kuvitteellista Contoso Hotel -skenaariota.</span><span class="sxs-lookup"><span data-stu-id="dc195-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="dc195-144">Contoso Hotel kerää seuraavat tiedot:</span><span class="sxs-lookup"><span data-stu-id="dc195-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="dc195-145">Hotelliyöpymisaktiviteetista koostuvat CRM-tiedot.</span><span class="sxs-lookup"><span data-stu-id="dc195-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="dc195-146">Tietojoukko sisältää tietojen kunkin rekisteröityneen asiakkaan yöpymispäivämäärät.</span><span class="sxs-lookup"><span data-stu-id="dc195-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="dc195-147">Siinä on myös tietoja esimerkiksi varauksesta, huonetyypistä ja rahankäytöstä.</span><span class="sxs-lookup"><span data-stu-id="dc195-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="dc195-148">Tiedot ovat neljän vuoden ajalta tammikuusta 2014 tammikuuhun 2018.</span><span class="sxs-lookup"><span data-stu-id="dc195-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="dc195-149">Hotellivieraiden asiakasprofiilit.</span><span class="sxs-lookup"><span data-stu-id="dc195-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="dc195-150">Näissä profiileissa on tietoja kustakin asiakkaasta, kuten nimi, syntymäaika, postiosoite, sukupuoli ja puhelinnumero.</span><span class="sxs-lookup"><span data-stu-id="dc195-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="dc195-151">Hotellin tarjoamien palvelujen käyttö, joita ovat esimerkiksi kylpyläpalvelut, pesula, WiFi tai kuriiripalvelut.</span><span class="sxs-lookup"><span data-stu-id="dc195-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="dc195-152">Nämä tiedot kirjataan kunkin rekisteröityneen asiakkaan osalta.</span><span class="sxs-lookup"><span data-stu-id="dc195-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="dc195-153">Yleensä palveluiden käyttö on linkitetään yöpymiseen.</span><span class="sxs-lookup"><span data-stu-id="dc195-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="dc195-154">Joissakin tapauksissa myös sellaiset asiakkaat voivat käyttää palveluja, jotka eivät yövy hotellissa.</span><span class="sxs-lookup"><span data-stu-id="dc195-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="dc195-155">Vaihtuvuusanalyysi</span><span class="sxs-lookup"><span data-stu-id="dc195-155">Churn Analysis</span></span>

<span data-ttu-id="dc195-156">Vaihtuvuusanalyysia käytetään liiketoiminnan eri alueilla.</span><span class="sxs-lookup"><span data-stu-id="dc195-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="dc195-157">Tässä esimerkissä tarkastellaan palvelun vaihtuvuutta edellä kuvattujen hotellipalvelujen osalta.</span><span class="sxs-lookup"><span data-stu-id="dc195-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="dc195-158">Näin saadaan toimiva esimerkki kattavasta mallijaksosta, jonka perusteella voidaan luoda muun tyyppisiä vaihtuvuusmalleja.</span><span class="sxs-lookup"><span data-stu-id="dc195-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="dc195-159">Vaihtuvuuden määritelmä</span><span class="sxs-lookup"><span data-stu-id="dc195-159">Definition of Churn</span></span>

<span data-ttu-id="dc195-160">Vaihtuvuuden määritelmä voi olla erilainen eri skenaarioissa.</span><span class="sxs-lookup"><span data-stu-id="dc195-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="dc195-161">Tässä esimerkissä vieras, joka ei ole yöpynyt hotellissa kuluneen vuoden aikana, on katsottava vaihtuneeksi.</span><span class="sxs-lookup"><span data-stu-id="dc195-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="dc195-162">Kokeilumalli voidaan tuoda valikoimasta.</span><span class="sxs-lookup"><span data-stu-id="dc195-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="dc195-163">Varmista ensin, että tuot Azure Blob -säilöstä **Hotelliyöpymisaktiviteetti**-, **Asiakastiedot**- ja **Palvelun käyttötiedot** -tiedot.</span><span class="sxs-lookup"><span data-stu-id="dc195-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Vaihtuvuusmallin tietojen tuominen](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="dc195-165">Ominaisuuksien kehitys</span><span class="sxs-lookup"><span data-stu-id="dc195-165">Featurization</span></span>

<span data-ttu-id="dc195-166">Vaihtuvuuden perusteella määritetään ensin raakaominaisuudet, jotka vaikuttavat selitteeseen.</span><span class="sxs-lookup"><span data-stu-id="dc195-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="dc195-167">Sen jälkeen nämä raakaominaisuudet käsitellään ominaisuuksiksi, joita voidaan käyttää koneoppimismalleissa.</span><span class="sxs-lookup"><span data-stu-id="dc195-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="dc195-168">Tiedot integroidaan Customer Insights, joten nämä taulukot voidaan liittää käyttämällä *asiakastunnusta*.</span><span class="sxs-lookup"><span data-stu-id="dc195-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Tuotujen tietojen liittäminen](media/join-imported-data.png)

<span data-ttu-id="dc195-170">Vaihtuvuusanalyysimallin muodostamisessa käytettävä ominaisuuksien kehitys voi olla jonkin verran haastavaa.</span><span class="sxs-lookup"><span data-stu-id="dc195-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="dc195-171">Tieto on aikafunktio, jossa uusi hotelliaktiviteetti kirjataan päivittäin.</span><span class="sxs-lookup"><span data-stu-id="dc195-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="dc195-172">Ominaisuuksien kehityksen aikana halutaan luoda staattisia ominaisuuksia dynaamisista tiedoista.</span><span class="sxs-lookup"><span data-stu-id="dc195-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="dc195-173">Tässä tapauksessa hotelliaktiviteetista luodaan useita ominaisuuksista ja liukuvana aikaikkunana on yksi vuosi.</span><span class="sxs-lookup"><span data-stu-id="dc195-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="dc195-174">Lisäksi laajennetaan luokitellut ominaisuudet, kuten huonetyyppi tai varaustyyppi, erillisiksi ominaisuuksiksi käyttämällä one-hot-koodausta.</span><span class="sxs-lookup"><span data-stu-id="dc195-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="dc195-175">Lopullinen ominaisuusluettelo:</span><span class="sxs-lookup"><span data-stu-id="dc195-175">Final list of features:</span></span>

| <span data-ttu-id="dc195-176">**Luku**</span><span class="sxs-lookup"><span data-stu-id="dc195-176">**Number**</span></span>  | <span data-ttu-id="dc195-177">**Alkuperäinen_sarake**</span><span class="sxs-lookup"><span data-stu-id="dc195-177">**Original_Column**</span></span>          | <span data-ttu-id="dc195-178">**Johdetut ominaisuudet**</span><span class="sxs-lookup"><span data-stu-id="dc195-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="dc195-179">1</span><span class="sxs-lookup"><span data-stu-id="dc195-179">1</span></span>           | <span data-ttu-id="dc195-180">Huonetyyppi</span><span class="sxs-lookup"><span data-stu-id="dc195-180">Room Type</span></span>                    | <span data-ttu-id="dc195-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="dc195-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="dc195-182">2</span><span class="sxs-lookup"><span data-stu-id="dc195-182">2</span></span>           | <span data-ttu-id="dc195-183">Varaustyyppi</span><span class="sxs-lookup"><span data-stu-id="dc195-183">Booking Type</span></span>                 | <span data-ttu-id="dc195-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="dc195-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="dc195-185">3</span><span class="sxs-lookup"><span data-stu-id="dc195-185">3</span></span>           | <span data-ttu-id="dc195-186">Matkustusluokka</span><span class="sxs-lookup"><span data-stu-id="dc195-186">Travel Category</span></span>              | <span data-ttu-id="dc195-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="dc195-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="dc195-188">4</span><span class="sxs-lookup"><span data-stu-id="dc195-188">4</span></span>           | <span data-ttu-id="dc195-189">Käytetty rahamäärä</span><span class="sxs-lookup"><span data-stu-id="dc195-189">Dollars Spent</span></span>                | <span data-ttu-id="dc195-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="dc195-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="dc195-191">5</span><span class="sxs-lookup"><span data-stu-id="dc195-191">5</span></span>           | <span data-ttu-id="dc195-192">Tulo- ja lähtöpäivämäärät</span><span class="sxs-lookup"><span data-stu-id="dc195-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="dc195-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="dc195-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="dc195-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="dc195-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="dc195-195">6</span><span class="sxs-lookup"><span data-stu-id="dc195-195">6</span></span>           | <span data-ttu-id="dc195-196">Palvelun käyttö</span><span class="sxs-lookup"><span data-stu-id="dc195-196">Service Usage</span></span>                | <span data-ttu-id="dc195-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="dc195-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="dc195-198">Mallin valinta</span><span class="sxs-lookup"><span data-stu-id="dc195-198">Model selection</span></span>

<span data-ttu-id="dc195-199">Seuraavaksi valitaan optimaalinen algoritmi.</span><span class="sxs-lookup"><span data-stu-id="dc195-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="dc195-200">Tässä tapauksessa useimmat ominaisuudet perustuvat luokitteluominaisuuksiin.</span><span class="sxs-lookup"><span data-stu-id="dc195-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="dc195-201">Yleensä päätöspuuhun perustuvat mallit toimivat hyvin.</span><span class="sxs-lookup"><span data-stu-id="dc195-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="dc195-202">Jos kyse on vain numeerisista ominaisuuksista, neuraaliverkot voivat olla parempi vaihtoehto.</span><span class="sxs-lookup"><span data-stu-id="dc195-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="dc195-203">Myös tukivektorikone (SVM) on hyvä vaihtoehto tällaisissa tilanteissa, joskin niiden tehokas toiminta edellyttää aika paljon säätämistä.</span><span class="sxs-lookup"><span data-stu-id="dc195-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="dc195-204">Ensimmäiseksi mallivaihtoehdoksi valitaan **Kaksiluokkainen tehostettu päätöspuu** ja sen jälkeen toiseksi malliksi **Kaksiluokkainen SVM**.</span><span class="sxs-lookup"><span data-stu-id="dc195-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="dc195-205">Azure koneoppimisstudion avulla voit tehdä A/B-testausta, joten alussa kannattaa käyttää kahta mallia yhden mallin sijaan.</span><span class="sxs-lookup"><span data-stu-id="dc195-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="dc195-206">Seuraava kuvassa näkyy Azuren koneoppimisstudion mallin kouluttaminen ja arviointijakso:</span><span class="sxs-lookup"><span data-stu-id="dc195-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Azuren koneoppimisstudion vaihtuvuusmalli](media/azure-machine-learning-model.png)

<span data-ttu-id="dc195-208">Lisäksi käytetään **permutaatio-ominaisuuden tärkeys** -tekniikkaa, mikä on tärkeä osa mallin optimointia.</span><span class="sxs-lookup"><span data-stu-id="dc195-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="dc195-209">Valmiissa malleissa ei ole juuri käsitystä siitä, millainen vaikutus tietyllä ominaisuudella on lopulliseen ennusteeseen.</span><span class="sxs-lookup"><span data-stu-id="dc195-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="dc195-210">Ominaisuuden tärkeyslaskin laskee mukautetulla algoritmilla yksittäisten ominaisuuksien vaikutuksen tietyn mallin lopputulokseen.</span><span class="sxs-lookup"><span data-stu-id="dc195-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="dc195-211">Ominaisuuden tärkeys normalisoidaan arvojen +1ja -1 välille.</span><span class="sxs-lookup"><span data-stu-id="dc195-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="dc195-212">Negatiivinen vaikutus tarkoittaa, että vastaava ominaisuus vaikuttaa yleisen käsityksen vastaisesti tulokseen, minkä vuoksi se pitäisi poistaa mallista.</span><span class="sxs-lookup"><span data-stu-id="dc195-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="dc195-213">Positiivinen vaikutus ilmaisee, että ominaisuus vaikuttaa merkittävästi ennusteen suuntaan.</span><span class="sxs-lookup"><span data-stu-id="dc195-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="dc195-214">Nämä arvot eivät ole korrelaatiokertoimia, sillä ne ovat erilaisia mittareita.</span><span class="sxs-lookup"><span data-stu-id="dc195-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="dc195-215">Lisätietoja on kohdassa [Permutaatio-ominaisuuden tärkeys](/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="dc195-215">For more information, see [Permutation Feature Importance](/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="dc195-216">Koko [vaihtuvuuskokemus on saatavana Azure AI Galleryssä](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="dc195-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="dc195-217">Asiakkaan elinkaaren arvon ennuste</span><span class="sxs-lookup"><span data-stu-id="dc195-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="dc195-218">Asiakkaan elinkaari arvo (CLTV) on yksi tärkeimmistä mittareista, jonka avulla yritys voi arvioida ja segmentoida asiakkaitaan.</span><span class="sxs-lookup"><span data-stu-id="dc195-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="dc195-219">Hotellitoiminnassa asiakkaiden tuntemus on välttämätöntä.</span><span class="sxs-lookup"><span data-stu-id="dc195-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="dc195-220">Esimerkiksi tietoisuus siitä, mistä tekijöistä hyvät asiakkaat muodostuvat, on välttämätön tieto.</span><span class="sxs-lookup"><span data-stu-id="dc195-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="dc195-221">Se auttaa hotellin johtoa arvioimaan, mihin ominaisuuksiin on keskityttävä ja mitä on parannettava, jotta paljon kuluttavat asiakkaat olisivat tyytyväisiä.</span><span class="sxs-lookup"><span data-stu-id="dc195-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="dc195-222">Nämä päätökset vaikuttavat suoraan myyntiin ja tuloihin.</span><span class="sxs-lookup"><span data-stu-id="dc195-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="dc195-223">Asiakkaan elinkaaren arvon määritelmä</span><span class="sxs-lookup"><span data-stu-id="dc195-223">Definition of CLTV</span></span>

<span data-ttu-id="dc195-224">Tässä esimerkissä asiakkaan elinkaaren arvo määritetään siksi kokonaissummaksi, jonka asiakkaan odotetaan käyttävän seuraavan 365 päivän aikana.</span><span class="sxs-lookup"><span data-stu-id="dc195-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="dc195-225">Tämän arvon ennustamiseen käytetään kaikkien asiakkaiden tietoja kuluneen kolmen vuoden ajalta.</span><span class="sxs-lookup"><span data-stu-id="dc195-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="dc195-226">Ominaisuuksien kehitys</span><span class="sxs-lookup"><span data-stu-id="dc195-226">Featurization</span></span>

<span data-ttu-id="dc195-227">Tässä tapauksessa ominaisuuksien kehitys muistuttaa vaihtuvuusskenaariota.</span><span class="sxs-lookup"><span data-stu-id="dc195-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="dc195-228">Selitteet ja ennustetut arvot kuitenkin poikkeavat edellä kuvatuista arvoista.</span><span class="sxs-lookup"><span data-stu-id="dc195-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="dc195-229">Mallin valinta</span><span class="sxs-lookup"><span data-stu-id="dc195-229">Model selection</span></span>

<span data-ttu-id="dc195-230">Asiakkaan elinkaaren arvon ennustaminen on regressiotehtävä, sillä ennustettu arvo on arvoltaan positiivinen jatkuva muuttuja.</span><span class="sxs-lookup"><span data-stu-id="dc195-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="dc195-231">Ominaisuuden ominaisuuksien perusteella valitaan yhdeksi algoritmiksi **Tehostetun päätöspuun regressio** ja **Neuraaliverkon regressio** toiseksi mallia kouluttavaksi algoritmiksi.</span><span class="sxs-lookup"><span data-stu-id="dc195-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="dc195-232">Tuotesuositus tai seuraava paras toiminto</span><span class="sxs-lookup"><span data-stu-id="dc195-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="dc195-233">Tuotesuositus tarkoittaa hotelliskenaariossa hotellin asiakkaille tarjoamien palvelujen suosittelua.</span><span class="sxs-lookup"><span data-stu-id="dc195-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="dc195-234">Tavoitteena on valita asiakkaille sopivia palveluja siten, että palvelujen käyttö maksimoidaan.</span><span class="sxs-lookup"><span data-stu-id="dc195-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="dc195-235">Se vastaa videoiden suoratoistopalvelujen käyttäjille tehtäviä elokuvasuosituksia.</span><span class="sxs-lookup"><span data-stu-id="dc195-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="dc195-236">Tuotesuosituksen tai seuraavan parhaan toiminnon määritelmä</span><span class="sxs-lookup"><span data-stu-id="dc195-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="dc195-237">Tavoitteeksi määritetään palvelun käytöstä saatavan summan maksimointi tarjoamalla hotellin asiakkaille heidän kiinnostuksen kohteitaan parhaiten vastaavia palveluja.</span><span class="sxs-lookup"><span data-stu-id="dc195-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="dc195-238">Ominaisuuksien kehitys</span><span class="sxs-lookup"><span data-stu-id="dc195-238">Featurization</span></span>

<span data-ttu-id="dc195-239">Vaihtuvuusmallin tavoin hotellin ServiceCustomerID ja asiakastunnus yhdistetään, jotta asiakastunnuksen perusteella voidaan muodostaa yhdenmukaisia suosituksia.</span><span class="sxs-lookup"><span data-stu-id="dc195-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Suositusmallin ominaisuuksien kehitys](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="dc195-241">Tiedot hankitaan kolmesta eri entiteetistä ja ominaisuudet johdetaan niistä.</span><span class="sxs-lookup"><span data-stu-id="dc195-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="dc195-242">Suositusongelman ominaisuuksien kehitys on erilaista kuin vaihtuvuus- tai CLTV-skenaarioissa.</span><span class="sxs-lookup"><span data-stu-id="dc195-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="dc195-243">Suositusmalliin tarvitaan tietoja kolmena ominaisuusjoukkona.</span><span class="sxs-lookup"><span data-stu-id="dc195-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="dc195-244">Mallin valinta</span><span class="sxs-lookup"><span data-stu-id="dc195-244">Model selection</span></span>

<span data-ttu-id="dc195-245">Tuotteita tai palveluja ennustetaan käyttämällä **Train Matchbox Recommender**-algoritmia suositusmallin kouluttamiseen.</span><span class="sxs-lookup"><span data-stu-id="dc195-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Tuotesuositusalgoritmi](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="dc195-247">**Train Matchbox Recommender** -mallin kolmeen syöttöporttiin syötetään koulutuspalvelun käyttötiedot, asiakkaan kuvaus (valinnainen) ja palvelun kuvaus.</span><span class="sxs-lookup"><span data-stu-id="dc195-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="dc195-248">Malli voidaan pisteyttää kolmella eri tavalla.</span><span class="sxs-lookup"><span data-stu-id="dc195-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="dc195-249">Yhtä tapaa käytetään arvioimaan mallia, jossa arvioidut nimikkeet sijoitetaan järjestykseen laskemalla NDCG (Normalized Discounted Cumulative Gain) -pistemäärä.</span><span class="sxs-lookup"><span data-stu-id="dc195-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="dc195-250">Tässä kokeilussa NDCG-pistemäärä on 0,97.</span><span class="sxs-lookup"><span data-stu-id="dc195-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="dc195-251">Kahdessa muussa vaihtoehdossa malli pisteytetään koko suositeltavan palveluluettelon perusteella tai vain ne nimikkeet pisteytetään, joita käyttäjät eivät ole aiemmin käyttäneet.</span><span class="sxs-lookup"><span data-stu-id="dc195-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="dc195-252">Kun koko palveluluettelon suositusten jakautumista tarkastellaan lähemmin, eniten suositeltavia palveluja ovat puhelin-, WiFi- ja kuriiripalvelut.</span><span class="sxs-lookup"><span data-stu-id="dc195-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="dc195-253">Tämä vastaa sitä, mitä on havaittu palvelujen kulutustietojen jakautumisessa:</span><span class="sxs-lookup"><span data-stu-id="dc195-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Suositusmallin tulokset](media/azure-machine-learning-model-output.png)

<span data-ttu-id="dc195-255">Koko [tuotesuosituskokeilu on saatavana Azure AI Galleryssä.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="dc195-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="dc195-256">Mukautettujen mallien integrointi</span><span class="sxs-lookup"><span data-stu-id="dc195-256">Integrate custom models</span></span>

<span data-ttu-id="dc195-257">Näiden ennusteiden käyttö Customer Insightsissa edellyttää, että ennusteet ja asiakastunnukset **viedään**.</span><span class="sxs-lookup"><span data-stu-id="dc195-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="dc195-258">[Vie ne samaan Azure Blob -säilösijaintiin](/azure/storage/common/storage-import-export-data-from-blobs), johon veit lähdetiedot.</span><span class="sxs-lookup"><span data-stu-id="dc195-258">[Export them to the same Azure Blob storage location](/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="dc195-259">Ennakoiva verkkopalvelu voidaan aikatauluttaa päivittämään pistemäärät säännöllisesti.</span><span class="sxs-lookup"><span data-stu-id="dc195-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="dc195-260">Mukautetun mallin luomia tietoja voidaan käyttää rikastuttamaan asiakastietoja entisestään.</span><span class="sxs-lookup"><span data-stu-id="dc195-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="dc195-261">Lisätietoja on aiheessa [Mukautetut koneoppimismallit](custom-models.md).</span><span class="sxs-lookup"><span data-stu-id="dc195-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]